---
import { Image } from 'astro:assets';
import gallery1 from '../assets/images/gallery/gallery-1.png';
import gallery2 from '../assets/images/gallery/gallery-2.png';
import gallery3 from '../assets/images/gallery/gallery-3.png';
import gallery4 from '../assets/images/gallery/gallery-4.png';

const galleryItems = [
  {
    id: 1,
    image: gallery1,
    alt: "Mulheres explorando novos destinos juntas",
    testimonial: "Viajar é trocar a roupa da alma.",
    author: "Mario Quintana",
    gridArea: "main"
  },
  {
    id: 2,
    image: gallery2,
    alt: "Conexões autênticas em viagens femininas",
    testimonial: "A vida é o que fazemos dela. As viagens são os viajantes.",
    author: "Fernando Pessoa",
    gridArea: "top-right"
  },
  {
    id: 3,
    image: gallery3,
    alt: "Liberdade e empoderamento nas estradas",
    testimonial: "Liberdade é pouco. O que eu desejo ainda não tem nome.",
    author: "Clarice Lispector",
    gridArea: "bottom-left"
  },
  {
    id: 4,
    image: gallery4,
    alt: "Histórias que transformam vidas",
    testimonial: "Pés, para que os quero, se tenho asas para voar?",
    author: "Frida Kahlo",
    gridArea: "bottom-right"
  }
];
---

<section class="relative py-20 lg:py-32 overflow-hidden">
  <div class="absolute inset-0 bg-gradient-mesh opacity-50"></div>
  <div class="absolute inset-0 noise-texture"></div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-12 relative z-10">
    <div class="max-w-[1600px] mx-auto">

      <!-- Header -->
      <div class="text-center mb-16 animate-fade-in">
        <div class="inline-flex items-center gap-2 glass-card px-4 py-2 rounded-full border border-primary/20 backdrop-blur-md mb-6">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-secondary opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-secondary"></span>
          </span>
          <span class="text-sm font-medium text-neutral-700">Inspiração</span>
        </div>

        <h2 class="font-display text-4xl sm:text-5xl lg:text-6xl font-bold text-neutral-900 mb-6">
          Juntas pelo
          <span class="relative inline-block ml-2">
            <span class="relative z-10 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Mundo</span>
            <svg class="absolute -bottom-2 left-0 w-full opacity-30" viewBox="0 0 200 12" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 6 Q 50 0, 100 6 T 200 6" stroke="url(#gallery-gradient)" stroke-width="3" fill="none" stroke-linecap="round"/>
              <defs>
                <linearGradient id="gallery-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#14B8A6;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#8B5CF6;stop-opacity:1" />
                </linearGradient>
              </defs>
            </svg>
          </span>
        </h2>

        <p class="text-xl text-neutral-600 max-w-3xl mx-auto leading-relaxed">
          Cada foto conta uma história de <strong class="font-semibold text-neutral-900">liberdade</strong>,
          <strong class="font-semibold text-neutral-900">conexão</strong> e
          <strong class="font-semibold text-neutral-900">transformação</strong>
        </p>
      </div>

      <!-- Gallery Grid - Bento Layout -->
      <div class="bento-grid scroll-reveal">
        {galleryItems.map((item, index) => (
          <article
            class={`gallery-item bento-${item.gridArea} group relative overflow-hidden rounded-3xl cursor-pointer animate-fade-in`}
            style={`animation-delay: ${index * 150}ms`}
          >
            <!-- Image Container -->
            <div class="absolute inset-0">
              <Image
                src={item.image}
                alt={item.alt}
                width={800}
                class="h-full w-full object-cover transition-transform duration-[1.5s] ease-[cubic-bezier(0.25,0.46,0.45,0.94)] group-hover:scale-[1.02]"
              />

              <!-- Gradient Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-neutral-900/60 via-neutral-900/10 to-transparent transition-opacity duration-700"></div>

              <!-- Quote Badge - Bottom Left -->
              <div class="absolute bottom-4 left-4 right-4 sm:bottom-6 sm:left-6 sm:right-6">
                <div class="backdrop-blur-md bg-white/10 rounded-2xl p-4 sm:p-5 border border-white/20 transform translate-y-3 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-700 ease-out">
                  <blockquote class="text-white font-medium text-sm sm:text-base leading-relaxed mb-2">
                    "{item.testimonial}"
                  </blockquote>
                  <cite class="text-white/80 text-xs sm:text-sm font-medium not-italic">
                    — {item.author}
                  </cite>
                </div>
              </div>

              <!-- Hover Glow Effect -->
              <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 ease-out pointer-events-none"
                   style="box-shadow: inset 0 0 100px rgba(20, 184, 166, 0.25);">
              </div>
            </div>
          </article>
        ))}
      </div>

    </div>
  </div>
</section>

<style>
  /* Bento Grid Layout - Mobile: Stack */
  .bento-grid {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 320px 280px 280px 320px;
    gap: 1rem;
  }

  /* Tablet: Creative asymmetric layout */
  @media (min-width: 768px) {
    .bento-grid {
      grid-template-columns: 0.55fr 0.45fr;
      grid-template-rows: 240px 240px;
      gap: 1rem;
    }

    /* Imagem principal - vertical, ocupa 2 rows */
    .bento-main {
      grid-column: 1;
      grid-row: 1 / 3;
    }

    /* Imagem menor direita topo */
    .bento-top-right {
      grid-column: 2;
      grid-row: 1;
    }

    /* Imagem horizontal - ocupa toda a largura embaixo */
    .bento-bottom-left {
      grid-column: 2;
      grid-row: 2;
    }

    .bento-bottom-right {
      display: none;
    }
  }

  /* Desktop: 3 colunas com layout diverso */
  @media (min-width: 1024px) {
    .bento-grid {
      grid-template-columns: 1fr 1.2fr 0.8fr;
      grid-template-rows: 280px 280px;
      gap: 1.25rem;
    }

    /* Vertical tall - left column */
    .bento-main {
      grid-column: 1;
      grid-row: 1 / 3;
    }

    /* Wide horizontal - center top */
    .bento-top-right {
      grid-column: 2;
      grid-row: 1;
    }

    /* Square - right top */
    .bento-bottom-left {
      grid-column: 3;
      grid-row: 1;
    }

    /* Wide - spans center and right bottom */
    .bento-bottom-right {
      display: block;
      grid-column: 2 / 4;
      grid-row: 2;
    }
  }

  /* Large Desktop - mais espaço */
  @media (min-width: 1280px) {
    .bento-grid {
      grid-template-columns: 1fr 1.3fr 0.7fr;
      grid-template-rows: 320px 320px;
      gap: 1.5rem;
    }
  }

  .gallery-item {
    position: relative;
    transition: transform 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                box-shadow 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .gallery-item:hover {
    transform: translateY(-6px);
    z-index: 10;
    box-shadow: 0 24px 50px rgba(0, 0, 0, 0.15);
  }

  /* Noise texture overlay */
  .noise-texture {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  /* Stagger animation delays */
  .animate-fade-in {
    opacity: 0;
    animation: fadeIn 0.8s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Loading state for images */
  img[loading="lazy"] {
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
  }

  img[loading="lazy"].loaded {
    opacity: 1;
  }
</style>

<script>
  // Lazy loading animation
  document.addEventListener('DOMContentLoaded', () => {
    const images = document.querySelectorAll('img[loading="lazy"]');

    images.forEach(img => {
      if (img.complete) {
        img.classList.add('loaded');
      } else {
        img.addEventListener('load', () => {
          img.classList.add('loaded');
        });
      }
    });

    // Intersection Observer for scroll animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    });

    const galleryItems = document.querySelectorAll('.gallery-item');
    galleryItems.forEach(item => observer.observe(item));
  });
</script>
