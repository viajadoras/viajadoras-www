---
import { Image } from 'astro:assets';
import gallery1 from '../assets/images/gallery/gallery-1.png';
import gallery2 from '../assets/images/gallery/gallery-2.png';
import gallery3 from '../assets/images/gallery/gallery-3.png';
import gallery4 from '../assets/images/gallery/gallery-4.png';
import gallery5 from '../assets/images/gallery/gallery-5.png';
import gallery6 from '../assets/images/gallery/gallery-6.png';

const galleryItems = [
  {
    id: 1,
    image: gallery1,
    alt: "Mulheres viajando juntas em Lisboa",
    testimonial: "Viajar é trocar a roupa da alma.",
    author: "Mario Quintana",
    height: "row-span-2"
  },
  {
    id: 2,
    image: gallery2,
    alt: "Segurança em viagens femininas",
    testimonial: "A vida é o que fazemos dela. As viagens são os viajantes.",
    author: "Fernando Pessoa",
    height: "row-span-1"
  },
  {
    id: 3,
    image: gallery3,
    alt: "Networking entre mulheres viajantes",
    testimonial: "Liberdade é pouco. O que eu desejo ainda não tem nome.",
    author: "Clarice Lispector",
    height: "row-span-1"
  },
  {
    id: 4,
    image: gallery4,
    alt: "Primeira viagem solo feminina",
    testimonial: "Não se nasce mulher, torna-se mulher.",
    author: "Simone de Beauvoir",
    height: "row-span-2"
  },
  {
    id: 5,
    image: gallery5,
    alt: "Experiências autênticas em viagens",
    testimonial: "Pés, para que os quero, se tenho asas para voar?",
    author: "Frida Kahlo",
    height: "row-span-1"
  },
  {
    id: 6,
    image: gallery6,
    alt: "Empoderamento feminino através de viagens",
    testimonial: "Coragem é a resistência ao medo, domínio do medo, e não a ausência do medo.",
    author: "Mark Twain",
    height: "row-span-1"
  }
];
---

<section class="relative py-20 lg:py-32 overflow-hidden">
  <div class="absolute inset-0 bg-gradient-mesh opacity-50"></div>
  <div class="absolute inset-0 noise-texture"></div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-12 relative z-10">
    <div class="max-w-[1600px] mx-auto">

      <!-- Header -->
      <div class="text-center mb-16 animate-fade-in">
        <div class="inline-flex items-center gap-2 glass-card px-4 py-2 rounded-full border border-primary/20 backdrop-blur-md mb-6">
          <span class="relative flex h-2 w-2">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-secondary opacity-75"></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-secondary"></span>
          </span>
          <span class="text-sm font-medium text-neutral-700">Inspiração</span>
        </div>

        <h2 class="font-display text-4xl sm:text-5xl lg:text-6xl font-bold text-neutral-900 mb-6">
          Juntas pelo
          <span class="relative inline-block ml-2">
            <span class="relative z-10 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Mundo</span>
            <svg class="absolute -bottom-2 left-0 w-full opacity-30" viewBox="0 0 200 12" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 6 Q 50 0, 100 6 T 200 6" stroke="url(#gallery-gradient)" stroke-width="3" fill="none" stroke-linecap="round"/>
              <defs>
                <linearGradient id="gallery-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#14B8A6;stop-opacity:1" />
                  <stop offset="100%" style="stop-color:#8B5CF6;stop-opacity:1" />
                </linearGradient>
              </defs>
            </svg>
          </span>
        </h2>

        <p class="text-xl text-neutral-600 max-w-3xl mx-auto leading-relaxed">
          Cada foto conta uma história de <strong class="font-semibold text-neutral-900">liberdade</strong>,
          <strong class="font-semibold text-neutral-900">conexão</strong> e
          <strong class="font-semibold text-neutral-900">transformação</strong>
        </p>
      </div>

      <!-- Gallery Grid - Masonry Layout -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-[280px]">
        {galleryItems.map((item, index) => (
          <article
            class={`gallery-item ${item.height} group relative overflow-hidden rounded-3xl cursor-pointer animate-fade-in`}
            style={`animation-delay: ${index * 100}ms`}
          >
            <!-- Glass Card Container -->
            <div class="absolute inset-0 glass-card border-2 border-transparent bg-clip-border transition-all duration-500 group-hover:border-gradient-to-br group-hover:from-primary/40 group-hover:via-secondary/40 group-hover:to-primary/40 backdrop-blur-sm">
              <!-- Image -->
              <Image
                src={item.image}
                alt={item.alt}
                width={600}
                class="h-full w-full object-cover transition-all duration-700 group-hover:scale-110"
              />

              <!-- Gradient Overlay (always visible) -->
              <div class="absolute inset-0 bg-gradient-to-t from-neutral-900/60 via-neutral-900/20 to-transparent opacity-70 group-hover:opacity-90 transition-opacity duration-500"></div>

              <!-- Hover Overlay with Testimonial -->
              <div class="absolute inset-0 bg-gradient-to-br from-primary/95 via-secondary/90 to-primary/95 opacity-0 group-hover:opacity-100 transition-all duration-500 flex items-center justify-center p-8">
                <div class="text-center transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-100">
                  <div class="relative mb-4">
                    <svg class="w-12 h-12 mx-auto text-white/30" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                    </svg>
                  </div>
                  <blockquote class="text-white font-medium text-lg sm:text-xl mb-4 leading-relaxed">
                    "{item.testimonial}"
                  </blockquote>
                  <cite class="text-white/90 text-sm font-semibold not-italic">
                    — {item.author}
                  </cite>
                </div>
              </div>

              <!-- Gradient Border Effect -->
              <div class="absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"
                   style="background: linear-gradient(135deg, rgba(20, 184, 166, 0.3) 0%, rgba(139, 92, 246, 0.3) 100%);
                          padding: 2px;
                          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
                          -webkit-mask-composite: xor;
                          mask-composite: exclude;">
              </div>
            </div>
          </article>
        ))}
      </div>

    </div>
  </div>
</section>

<style>
  .gallery-item {
    position: relative;
    transition: transform 0.3s ease-in-out;
  }

  .gallery-item:hover {
    transform: translateY(-8px);
    z-index: 10;
  }

  /* Masonry heights for variety */
  .row-span-1 {
    grid-row: span 1;
  }

  .row-span-2 {
    grid-row: span 2;
  }

  /* Gradient border animation */
  @keyframes gradient-border {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  .glass-card {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Noise texture overlay */
  .noise-texture {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
  }

  /* Stagger animation delays */
  .animate-fade-in {
    opacity: 0;
    animation: fadeIn 0.8s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .gallery-item {
      grid-row: span 1 !important;
      min-height: 280px;
    }
  }

  /* Loading state for images */
  img[loading="lazy"] {
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
  }

  img[loading="lazy"].loaded {
    opacity: 1;
  }
</style>

<script>
  // Lazy loading animation
  document.addEventListener('DOMContentLoaded', () => {
    const images = document.querySelectorAll('img[loading="lazy"]');

    images.forEach(img => {
      if (img.complete) {
        img.classList.add('loaded');
      } else {
        img.addEventListener('load', () => {
          img.classList.add('loaded');
        });
      }
    });

    // Intersection Observer for scroll animations
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -100px 0px'
    });

    const galleryItems = document.querySelectorAll('.gallery-item');
    galleryItems.forEach(item => observer.observe(item));
  });
</script>
